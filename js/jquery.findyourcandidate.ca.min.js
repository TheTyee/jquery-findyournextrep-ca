/*! jquery.findyourcandidate.ca 2015-09-18 Copyright (c) 2015 James McKinney, Open North Inc. <james@opennorth.ca> under a BSD3 License.*/
!function(a){$.findYourRep.render=function(a,b){var a=Handlebars.compile(a),c=a(b);return c},$.findYourRep.represent=function(a){var b=new $.Deferred,c="https://represent.opennorth.ca/candidates/?limit=0&callback=?",d={};return $.findYourRep.geocodeOrResolveImmediately(a).done(function(a){d.point=a.latitude+","+a.longitude,$.findYourRep.apiCall(c,d).done(function(a){b.then(function(a){$(".fyr-results h3").append($.findYourRep.render($.findYourRep.districtTemplate,$.findYourRep.getTemplateContext(a[0],{})))}),b.resolve(a.objects)})}),b},$.findYourRep.getTemplateContext=function(a,b){var c=/(\s+)/,d=a.party_name,e=d.replace(c,"-").toLowerCase();return{details:a.elected_office,photoUrl:a.photo_url,resultUrl:a.url||a.source_url,name:a.name,district_name:a.district_name,elected_office:a.elected_office,source_url:a.source_url,personal_url:a.personal_url,party_name:a.party_name,party_slug:e,email:a.email,facebook:a.extra.facebook,twitter:a.extra.twitter,url:a.url,incumbent:a.incumbent}},$.findYourRep.districtTemplate="Your Candidates for {{ district_name }}",$.findYourRep.formTemplate="<div class='find-your-rep fyr-container' id='fyr{{ idx }}' data-apis='{{ apis }}'><h3>{{ title }}</h3><p>{{ text }}</p><div class='fyr-controls'><textarea placeholder='Enter your address'>{{ defaultValue }}</textarea><button class='fyr-submit'>{{ action }}</button></div><small>Powered by <a href='https://represent.opennorth.ca/'>Represent</a></small></div>",$.findYourRep.resultsTemplate="<div class='fyr-results'><h3></h3><div class='fyr-represent cf' style='display:none;'><div id='candidates_info' class='fyr-reps'></div></div><a href='#' class='fyr-back'>&laquo; start over</a><br /><br /><small>Powered by <a href='https://represent.opennorth.ca/'>Represent</a></small></div>",$.findYourRep.resultTemplate="<div class='individual'><div class='candidate-top {{ party_slug }}'><div class='party-logo'><img height='20' alt='{{ party_name }}' src='{{ party_slug }}-white.png'></div>{{#if incumbent}}<div class='incumbent'><span>Incumbent</span></div>{{/if}}<img class='candidate-image' src='{{ photoUrl }}'><h4>{{ name }}</h4></div><div class='candidate-bottom'>    <ul>        {{#if website}}<li><a href='{{ website }}'>Website</a></li>{{/if}}        {{#if email}}<li><a href='mailto:{{ email }}'>Email</a></li>{{/if}}        {{#if twitter}}<li><a href='{{ twitter }}'>Twitter</a></li>{{/if}}        {{#if facebook}}<li><a href='{{ facebook }}'>Facebook</a></li>{{/if}}    </ul></div></div>"}(this);